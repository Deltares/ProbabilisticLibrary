\chapter{Combining failure probabilities}
\label{chp:CombiningFailureProbabilities}

\section{System analysis}
\label{sec:SystemAnalysis}

The probabilities of failure of the components are combined to derive the probability of failure of the whole system. This is being referred to as system analysis. System analysis generally deals with parallel systems, series systems or combinations of both. A parallel system refers to a system in which failure only occurs if all components fail. A series system refers to a system where failure occurs if at least one of the components fails. This concept is schematically depicted in \Fref{fig:SystemAnalysis}.

\begin{figure}[H]\centering
\includegraphics*[width=5.96in, height=1.31in, keepaspectratio=false]{\pathProbLibPictures systemanalysis.png}
\caption{Schematic view of a parallel system, series system and a combination of both. Components $1$, $2$ and $3$ can be viewed as bridges. The systems fails if a passenger can not walk from left to right over the bridges.}\label{fig:SystemAnalysis}
\end{figure}

In the \probLib, failure probabilities of components are combined using the equivalent planes method, which is described in the following section.

A theoretical description of the method, with a focus on the Hohenbichler method, is presented in \Aref{Section_2.4.2}.

\section{Equivalent planes}
\label{sec:EquivalentPlanes}

When combining later, the first design points are calculated individually for each failure definition and then combined. This combination uses an equivalent plane $M$ for each design point, which provides an approximation. The equivalent plane is defined as follows:

\begin{align}
\label{eq:EquivalentPlane}
M_{\text{i}}\left(u\right) = \beta_{\text{i}} + \sum_{\text{j}} \alpha_{i,j} \cdot u_{\text{j}}
\end{align}

and 

\begin{align}
\label{eq:EquivalentPlaneCombine}
M_{\text{combined}}\left(u\right) = \left\{\begin{array}{ll}{\text{series}} & \min\limits_{\text{i}} M_{\text{i}}\left(u\right)\\
\text{parallel} & \max\limits_{\text{i}} M_{\text{i}}\left(u\right)
\end{array}	
\right.
\end{align}

where:

\begin{longtable*}{p{20mm}p{\textwidth-24pt-20mm}}  
	$M_{\text{i}}$ & is the result of the equivalent plane of design point $i$ \\
	$M_{\text{combined}}$ & is the result of the combination of a number of design points $i$ \\
	$\beta_{\text{i}}$ & is the reliability index of design point $i$ \\
	$\alpha_{i,j}$ & is the alpha factor of variable $j$ in design point $i$
\end{longtable*}

\subsection{Directional sampling}
\label{sec:CombiningDesignPointsDS}

Directional sampling (see \autoref{sec:DirectionalSampling}) is applied on the combined model $M_{\text{combined}}$
(see \autoref{eq:EquivalentPlaneCombine}). The following settings are applied: 

\begin{longtable*}{p{40mm}p{\textwidth-40mm}}  
	Design point method & Center of gravity \\
	Directions & 1000 - 10000 \\
	Convergence factor & 0.1
\end{longtable*}

\subsection{Importance sampling}
\label{sec:CombiningDesignPointsIS}

Depending on the combination method (series or parallel) the following algorithms are applied:

\subsubsection{Importance sampling - Series}

Importance sampling (see \autoref{sec:ImportanceSampling}) is applied on the combined model $M_{\text{combined}}$
(see \autoref{eq:EquivalentPlaneCombine}) in the following iterative way: the combined probability of the first $N+1$ design points is the probability of the first $N$ design points added with the contribution of design point $N+1$, where it does not overlap with one of the previous design points (see \autoref{eq:ImportanceSamplingSeries}).

\begin{align}
\label{eq:ImportanceSamplingSeries}
P\left(X_{1 \ldots N+1}\right) = P\left(X_{1 \ldots N}\right) + P\left(X_{N+1}\right) \cap P\left(\overline{X_{1 \ldots N}}\right)
\end{align}

where:

\begin{longtable*}{p{20mm}p{\textwidth-24pt-20mm}}  
	$P\left(X_{1 \ldots N}\right)$ & is the combined probability of the first $N$ design points \\
	$P\left(X_{1 \ldots N+1}\right)$ & is the combined probability of the first $N+1$ design points \\
	$P\left(\overline{X_{1 \ldots N}}\right)$ & is the complement of the combined probability of the first $N$ design points \\
	$P\left(X_{N+1}\right)$ & is the probability of design point $N+1$
\end{longtable*}

\autoref{eq:ImportanceSamplingSeries} can be rewritten as:

\begin{align}
\label{eq:ImportanceSamplingSeriesCond}
P\left(X_{1 \ldots N+1}\right) = P\left(X_{1 \ldots N}\right) + P\left(X_{N+1}\right) \cdot \left(1 - P\left(X_{1 \ldots N} | X_{N+1}\right)\right) 
\end{align}


The last term ($P\left(X_{1 \ldots N} | X_{N+1}\right)$) is calculated using Importance Sampling (see \autoref{sec:ImportanceSampling}).
The starting point of the Importance Sampling is set to the design point of $X_{N+1}$. The calculation is stopped when the remainder of the design points represent a small probability of failure.

\subsubsection{Importance sampling - Parallel}

The parallel combination uses Crude Monte Carlo (see \autoref{sec:CrudeMonteCarlo}).
The sampling space is limited to the area which can lead to failure,
which could be very small.
Only values for $u_{\text{i}}$ are allowed for which the following condition is true:

\begin{align}
\forall k, u_{\text{min}} < u_{\text{j}} < u_{\text{min}} < u_{\text{j} } \exists u_{\text{i}} | M_{\text{k}}\left(u\right) = 0 \land u_{\text{min}} < u_{\text{i}} < u_{\text{max}}
\end{align}

where:
\begin{longtable*}{p{20mm}p{\textwidth-24pt-20mm}}  
	$i$ & is the index of the $i^{\text{th}}$ variable \\
	$j$ & is any other variable index ($j \neq i$) \\
	$k$ & is the index of the design point \\
	$u_{\text{min}}$ & is the computationally minimum possible value of $u$ ($-8$) \\
	$u_{\text{max}}$ & is the computationally maximum possible value of $u$ ($8$) \\
	$M_{\text{k}}\left(u\right)$ & is the equivalent plane of the $i^{\text{th}}$ design point (see \autoref{eq:EquivalentPlane})
\end{longtable*}

\subsection{Hohenbichler}\label{sec:Hohenbichler}

The core of the Hohenbichler algorithm is the combination of two models $M_{\text{combined}}$ (see \autoref{eq:EquivalentPlaneCombine}).
This combination is calculated using FORM (see \autoref{sec:FORM}).

The result of this combination is a design point, which is represented as an equivalent plane when it needs to be combined with a third design point. This process is repeated until all design points have been combined. 

First, the two most contributing design points are combined, followed by the remaining design point with the highest probability of failure, and so on. This iterative approach ensures that the error associated with representing intermediate design points is minimized.
